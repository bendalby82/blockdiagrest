<html>
<head><title>Test Drawing</title>
<script>
function drawStuff(){
	var b_canvas = document.getElementById("a");
	var context = b_canvas.getContext("2d");
	var textStyleStageName = 'bold 14px arial';

	var vspBoxWidth = 140;
	var vspBoxHeight = 100;
	var vspBoxPosX = 20;
	var vspBoxPosY = 70;
	var txtLine = '';
	var txtLineWidth = 0;
	var txtLineHeight = 0;
	var vspLine1Width = 0;
	var vspLine2Width = 0;
	var vspLine3Width = 0;
	var vspLine4Width = 0;
	var vspLinePosY = 0;
	var vspSpaceBetweenTextLines = 6;
	var elapsedTimeBoxWidth = 0;
	var elapsedTimeBoxHeight = 20;


	//b_context.fillRect(50, 25, 150, 100);

	for (var x = 0.5; x < 500; x += 10){
		context.moveTo(x, 0);
		context.lineTo(x, 375);
	}

	for (var y = 0.5; y < 375; y += 10){
		context.moveTo(0, y);
		context.lineTo(500, y);
	}

	context.strokeStyle = "#eee";
	context.stroke();

	context.beginPath();
	context.moveTo(0, 40);
	context.lineTo(240, 40);
	context.moveTo(260, 40);
	context.lineTo(500, 40);
	context.moveTo(495, 35);
	context.lineTo(500, 40);
	context.lineTo(495, 45);

	context.strokeStyle = "#000";
	context.stroke();
	context.closePath();

	//Draw a Value Stream Box
	context.rect(vspBoxPosX,vspBoxPosY,vspBoxWidth,vspBoxHeight);
	context.shadowColor = 'black';
	context.shadowBlur = 5;
	context.shadowOffsetX = 3;
	context.shadowOffsetY = 3;
	context.fillStyle = '#00ccff';
	context.stroke();
	context.fill();

	//Add some text
	context.beginPath();
	context.shadowColor = 'transparent';
	context.font = textStyleStageName;
	context.fillStyle = 'black';
	txtLine = 'Planning'
	vspLinePosY = vspBoxPosY + 30;
	context.fillText(txtLine,parseInt((vspBoxWidth - context.measureText(txtLine).width)/2) + vspBoxPosX, vspLinePosY);
	context.font = '14px arial';
	txtLineHeight = context.measureText('M').width;

	txtLine = '60 hrs avg'
	vspLinePosY = vspLinePosY + txtLineHeight + vspSpaceBetweenTextLines;
	context.fillText(txtLine, parseInt((vspBoxWidth - context.measureText(txtLine).width)/2) + vspBoxPosX, vspLinePosY);

	context.beginPath();
	txtLine = '120 hrs';
	txtLineWidth = context.measureText(txtLine).width;
	//See https://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas
	txtLineHeight = context.measureText('M').width;
	elapsedTimeBoxWidth = txtLineWidth + 20;
	context.rect(parseInt((vspBoxWidth - elapsedTimeBoxWidth)/2) + vspBoxPosX,vspBoxPosY + vspBoxHeight + 10,elapsedTimeBoxWidth,elapsedTimeBoxHeight);
	context.fillStyle = '#cccccc';
	context.fill();

	context.beginPath();
	context.fillStyle = 'black';
	//Center text horizontally and vertically
	context.fillText(txtLine, parseInt((vspBoxWidth - txtLineWidth)/2) + vspBoxPosX,
		vspBoxPosY + vspBoxHeight + 10 + 
		elapsedTimeBoxHeight - parseInt((elapsedTimeBoxHeight - txtLineHeight)/2));
	//context.closePath();
	


}

</script>
</head>
<body onload="drawStuff()">
<!--http://diveintohtml5.info/canvas.html-->
<canvas id="a" width="500" height="375" class="clear" style="border:1px dotted;float:left"></canvas>

</body>
</html>